<mah:MetroWindow x:Class="HWEnchCalc.MainWindow"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                 xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
                 xmlns:starPanelControl="clr-namespace:HWEnchCalc.StarPanelControl"
                 mc:Ignorable="d"
                 Title="Калькулятор эффективности прокачки" Height="561.909" Width="704.773"
                 BorderThickness="0"
                 GlowBrush="Black"
                 ResizeMode="NoResize"
                 WindowTransitionsEnabled="False"
                 WindowStartupLocation="CenterScreen">
    <mah:MetroWindow.Flyouts>
        <mah:FlyoutsControl>
            <mah:Flyout Header="Flyout" Position="Right" Width="200">
                <mah:Flyout x:Name="YourMahAppFlyout" Content="1111111!!" />
            </mah:Flyout>
        </mah:FlyoutsControl>
    </mah:MetroWindow.Flyouts>

    <mah:MetroWindow.RightWindowCommands>
        <mah:WindowCommands>
            <Button Content="Layers" Cursor="Hand" />
        </mah:WindowCommands>
    </mah:MetroWindow.RightWindowCommands>
    <Window.Resources>
        <Style TargetType="DataGridColumnHeader">
            <Setter Property="FontSize" Value="16" />
            <Setter Property="FontStyle" Value="Normal" />
            <!--<Setter Property="FontWeight" Value="Bold"></Setter>-->
        </Style>
        <Style x:Key="BaseTextBox" TargetType="TextBox" BasedOn="{StaticResource MetroTextBox}">
            <Setter Property="TextWrapping" Value="Wrap" />
            <Setter Property="TextAlignment" Value="Center" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="VerticalAlignment" Value="Top" />
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="Height" Value="23" />
            <Setter Property="Width" Value="90" />
        </Style>
        <Style x:Key="BaseBtn" TargetType="Button">
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="VerticalAlignment" Value="Top" />
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="Height" Value="23" />
            <Setter Property="Width" Value="104" />
        </Style>
        <Style x:Key="DefaultCb" TargetType="ComboBox" BasedOn="{StaticResource MetroComboBox}">
            <Setter Property="VerticalAlignment" Value="Top" />
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="Width" Value="100" />
        </Style>
        <Style x:Key="BaseGrBox" TargetType="GroupBox" BasedOn="{x:Null}">
            <Setter Property="VerticalAlignment" Value="Top" />
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="Height" Value="67" />
            <Setter Property="Width" Value="112" />
            <Setter Property="FontSize" Value="14" />
        </Style>
        <Style x:Key="BaseSquareBtn" TargetType="Button" BasedOn="{StaticResource BaseBtn}">
            <Setter Property="Height" Value="51" />
            <Setter Property="Width" Value="75" />
        </Style>
    </Window.Resources>
    <Grid DataContext="{Binding}" Background="#FF7DC5E0">
        <Grid Margin="10,6,10,408" Background="#FFF9F6F6">
            <GroupBox Header="Параметры титана" HorizontalAlignment="Left" Height="107"
                      VerticalAlignment="Top" Width="564" Background="#CC4E4E8D" Margin="10,6,0,0">
                <StackPanel Orientation="Horizontal" Margin="3,-4,0,-2" Background="White">
                    <GroupBox Header="Тип" Style="{StaticResource BaseGrBox}">
                        <ComboBox ItemsSource="{Binding TitanBaseStats.TitanVariants}"
                                  SelectedItem="{Binding TitanBaseStats.TitanName}"
                                  HorizontalAlignment="Left" Margin="0,10,0,0" VerticalAlignment="Top" Width="99" />
                    </GroupBox>
                    <GroupBox Header="Атака" Style="{StaticResource BaseGrBox}">
                        <TextBox Text="{Binding TitanBaseStats.Atack, UpdateSourceTrigger=PropertyChanged}"
                                 Margin="4,10,0,0" Style="{StaticResource BaseTextBox}" />
                    </GroupBox>
                    <GroupBox Header="ХП" Style="{StaticResource BaseGrBox}">
                        <TextBox Text="{Binding TitanBaseStats.Hp, UpdateSourceTrigger=PropertyChanged}"
                                 Margin="4,10,0,0" Style="{StaticResource BaseTextBox}" />
                    </GroupBox>
                    <GroupBox Header="Уровень" Style="{StaticResource BaseGrBox}" Width="119">
                        <ComboBox SelectedValue="{Binding TitanBaseStats.Level}"
                                  ItemsSource="{Binding TitanBaseStats.LevelVariants}"
                                 Style="{StaticResource DefaultCb}" Margin="4,10,0,0" />
                    </GroupBox>
                    <Grid Margin="0,6,0,10" Width="92">
                        <Image Source="{Binding TitanBaseStats.TitanFaceImg}" Margin="22,0,16,0" />
                        <Image Source="{Binding TitanBaseStats.TitanBorderImg}" Margin="16,0,10,0" />
                    </Grid>
                </StackPanel>
            </GroupBox>
            <Button Content="&gt;&gt;"
                    Visibility="{Binding CalcManager.NextBtnVisibility}"
                    Command="{Binding CalcManager.NextCalcCommand}"
                    Margin="596,26,0,52" HorizontalAlignment="Left" Width="70" />
            <Button Content="&lt;&lt;"
                    Visibility="{Binding CalcManager.PrevBtnVisibility}"
                    Command="{Binding CalcManager.PreviosCalcCommand}"
                    HorizontalAlignment="Left" Margin="596,72,0,0" VerticalAlignment="Top" Width="70" Height="41" />
            <starPanelControl:StarPanel Grid.Row="0" Margin="463,8,0,0"
                                        StarCount="{Binding TitanBaseStats.StarCount, Mode=TwoWay}"
                                        HorizontalAlignment="Left" VerticalAlignment="Top" Width="111" Height="22" />
        </Grid>
        <mah:FlipView x:Name="FlipView" Margin="10,129,10,0" VerticalAlignment="Top"
                      Height="397" SelectedIndex="{Binding CalcManager.CurenCalculatorIndex}"
                      Foreground="{x:Null}" BannerText="{Binding CalcManager.CalcBannerText}"
                      BorderBrush="White" BorderThickness="2" MouseHoverBorderBrush="{x:Null}" Background="White">
            <Grid Margin="0,3,0,-3">
                <Grid.RowDefinitions>
                    <RowDefinition Height="112" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" MinWidth="484" />
                    <ColumnDefinition Width="315" />
                    <ColumnDefinition Width="52" />
                </Grid.ColumnDefinitions>
                <GroupBox Header="Повышение артефакта атаки" HorizontalAlignment="Left" Height="107"
                          Margin="10,5,0,0" VerticalAlignment="Top" Width="463" Grid.Row="0" Grid.Column="0">
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,2">
                        <GroupBox Header="Уровни" Style="{StaticResource BaseGrBox}">
                            <ComboBox
                                SelectedValue="{Binding TitanEssenceCalc.CurrentCalcInfo.AtackArt.LevelInfo}"
                                ItemsSource="{Binding TitanEssenceCalc.FirstArtLevelUpVariants}"
                                Style="{StaticResource DefaultCb}" Margin="0,10,0,0" />
                        </GroupBox>
                        <GroupBox Header="Изначально" Style="{StaticResource BaseGrBox}">
                            <TextBox Text="{Binding TitanEssenceCalc.CurrentCalcInfo.AtackArt.BaseStatValue, UpdateSourceTrigger=PropertyChanged}"
                                Margin="4,10,0,0" Style="{StaticResource BaseTextBox}" />
                        </GroupBox>
                        <GroupBox Header="Увеличение" Style="{StaticResource BaseGrBox}">
                            <TextBox Text="{Binding TitanEssenceCalc.CurrentCalcInfo.AtackArt.IncreaseStatValue, UpdateSourceTrigger=PropertyChanged}"
                                Margin="4,10,0,0" Style="{StaticResource BaseTextBox}" />
                        </GroupBox>
                        <GroupBox Header="Эссенций" Style="{StaticResource BaseGrBox}">
                            <TextBox Text="{Binding TitanEssenceCalc.CurrentCalcInfo.AtackArt.EssenceValue, UpdateSourceTrigger=PropertyChanged}"
                                Margin="4,10,0,0" Style="{StaticResource BaseTextBox}" />
                        </GroupBox>
                    </StackPanel>
                </GroupBox>
                <GroupBox Header="Лог вычислений" HorizontalAlignment="Left"
                          Margin="7,6,0,0" Width="173" Grid.Column="1" Grid.Row="0"
                          Grid.RowSpan="3" Height="333" VerticalAlignment="Top">
                    <DataGrid x:Name="Dg1" ItemsSource="{Binding TitanEssenceCalc.EssenceCalcTable}" IsReadOnly="True"
                              SelectedIndex="{Binding TitanEssenceCalc.SelectedTableIndex}"
                              AutoGeneratingColumn="DataGrid_OnAutoGeneratingColumn"
                              Margin="0,0,1,5" />
                </GroupBox>
                <GroupBox Header="Повышение артефакта защиты" HorizontalAlignment="Left" Height="107"
                          Margin="10,5,0,0" VerticalAlignment="Top" Width="463" Grid.Row="1" Grid.Column="0">
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,2">
                        <GroupBox Header="Уровни" Style="{StaticResource BaseGrBox}">
                            <ComboBox
                                SelectedValue="{Binding TitanEssenceCalc.CurrentCalcInfo.DefArt.LevelInfo}"
                                ItemsSource="{Binding TitanEssenceCalc.SecondArtLevelUpVariants}"
                                 Style="{StaticResource DefaultCb}" Margin="0,10,0,0" />
                        </GroupBox>
                        <GroupBox Header="Изначально" Style="{StaticResource BaseGrBox}">
                            <TextBox
                                Text="{Binding TitanEssenceCalc.CurrentCalcInfo.DefArt.BaseStatValue, UpdateSourceTrigger=PropertyChanged}"
                                Margin="4,10,0,0" Style="{StaticResource BaseTextBox}" />
                        </GroupBox>
                        <GroupBox Header="Увеличение" Style="{StaticResource BaseGrBox}">
                            <TextBox
                                Text="{Binding TitanEssenceCalc.CurrentCalcInfo.DefArt.IncreaseStatValue, UpdateSourceTrigger=PropertyChanged}"
                                Margin="4,10,0,0" Style="{StaticResource BaseTextBox}" />
                        </GroupBox>
                        <GroupBox Header="Эссенций" Style="{StaticResource BaseGrBox}">
                            <TextBox
                                Text="{Binding TitanEssenceCalc.CurrentCalcInfo.DefArt.EssenceValue, UpdateSourceTrigger=PropertyChanged}"
                                Style="{StaticResource BaseTextBox}" Margin="4,10,0,0" />
                        </GroupBox>
                    </StackPanel>
                </GroupBox>
                <GroupBox HorizontalAlignment="Left" Height="107"
                          Margin="10,5,0,0" VerticalAlignment="Top" Width="463" Grid.Row="2" Grid.Column="0"
                          Background="#CC2E630A" BorderBrush="#CC2E630A">
                    <GroupBox.Header>
                        <TextBlock Text="{Binding TitanEssenceCalc.ResultDesc}" />
                    </GroupBox.Header>
                    <Grid Margin="0,0,0,-1" Background="White">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="195.5" />
                        </Grid.ColumnDefinitions>
                        <Button Content="Записать"
                                IsEnabled="{Binding TitanEssenceCalc.HasAddNewTitanToCalc}"
                                Command="{Binding TitanEssenceCalc.AddNewEntryCommand}"
                                HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top"
                                Width="70" Height="50" />
                        <Button Content="Удалить"
                                Command="{Binding TitanEssenceCalc.DeleteEntryCommand}"
                                HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top"
                                Width="70" Height="50" Grid.Column="2" />
                        <Button Content="Очистить"
                                Command="{Binding TitanEssenceCalc.ClearCommand}"
                                HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top"
                                Width="70" Height="50" Grid.Column="1" />
                        <GroupBox Style="{StaticResource BaseGrBox}" Header="Результат" Margin="48,-1,25,0"
                                  Width="Auto" BorderBrush="#FF104463" Grid.Column="3"
                                  HorizontalAlignment="Stretch">
                            <TextBox Text="{Binding TitanEssenceCalc.Result, Mode=OneWay}" Margin="4,10,0,0"
                                     Style="{StaticResource BaseTextBox}" IsReadOnly="True"
                                     Background="#FFB64B41" Width="105" Foreground="White" FontWeight="Bold"
                                     BorderBrush="Black" />
                        </GroupBox>
                    </Grid>
                </GroupBox>

                <starPanelControl:StarPanel Grid.Row="0" Grid.Column="0" Margin="355,7,0,0"
                                            StarCount="{Binding TitanEssenceCalc.CurrentCalcInfo.AtackArt.StarCount, Mode=TwoWay}"
                                            HorizontalAlignment="Left" Width="109" Height="22" VerticalAlignment="Top" />
                <starPanelControl:StarPanel Grid.Row="1" Grid.Column="0" Margin="355,7,0,0"
                                            StarCount="{Binding TitanEssenceCalc.CurrentCalcInfo.DefArt.StarCount, Mode=TwoWay}"
                                            HorizontalAlignment="Left" Width="109" Height="22" VerticalAlignment="Top" />
            </Grid>
            <Grid />
            <Grid />

        </mah:FlipView>
    </Grid>

</mah:MetroWindow>